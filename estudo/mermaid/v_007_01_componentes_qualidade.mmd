sequenceDiagram
    participant Usuario as ğŸ‘¤ UsuÃ¡rio BancÃ¡rio
    participant UI as ğŸ–¥ï¸ Interface Web
    participant Gateway as ğŸŒ API Gateway
    participant AuthService as ğŸ” Auth Service
    participant ConfigService as âš™ï¸ Config Service
    participant WorkflowEngine as ğŸ”„ Workflow Engine
    participant QualityMetrics as ğŸ“Š Quality Metrics
    participant AuditService as ğŸ“‹ Audit Service
    participant Repository as ğŸ—ƒï¸ Config Repository
    participant Cache as âš¡ Redis Cache
    participant BCB as ğŸ›ï¸ Banco Central

    Note over Usuario, BCB: Diagrama baseado em Gallotti (2021) - PadrÃµes Arquiteturais
    Note over Usuario, BCB: MÃ©tricas de Qualidade conforme Pressman (2016)

    Usuario->>UI: Solicita criaÃ§Ã£o de parÃ¢metro crÃ­tico
    UI->>Gateway: POST /api/parameters/critical
    Gateway->>AuthService: Validar credenciais + RBAC
    
    alt AutenticaÃ§Ã£o VÃ¡lida
        AuthService-->>Gateway: Token JWT vÃ¡lido
        Gateway->>ConfigService: Processar criaÃ§Ã£o
        
        ConfigService->>QualityMetrics: Registrar mÃ©trica de complexidade
        Note over QualityMetrics: ISO/IEC 25010 - Maintainability Index
        QualityMetrics-->>ConfigService: Complexidade = 0.73 (AceitÃ¡vel)
        
        ConfigService->>Repository: Validar padrÃ£o Repository
        Repository-->>ConfigService: Schema validado (Gallotti Pattern)
        
        ConfigService->>WorkflowEngine: Iniciar workflow multi-nÃ­vel
        WorkflowEngine->>AuditService: Log de iniciaÃ§Ã£o
        
        loop AprovaÃ§Ã£o Multi-nÃ­vel (3 nÃ­veis)
            WorkflowEngine->>AuditService: Registrar estÃ¡gio aprovaÃ§Ã£o
            Note over AuditService: Conformidade ResoluÃ§Ã£o CMN 4.893/2021
        end
        
        WorkflowEngine->>ConfigService: AprovaÃ§Ã£o completa
        ConfigService->>Repository: Persistir configuraÃ§Ã£o
        Repository->>Cache: Invalidar cache hierÃ¡rquico
        
        ConfigService->>QualityMetrics: MÃ©tricas pÃ³s-implementaÃ§Ã£o
        Note over QualityMetrics: Pressman (2016) - Deployment Success Rate = 94%
        
        ConfigService->>AuditService: Audit completo
        AuditService->>BCB: NotificaÃ§Ã£o regulatÃ³ria automÃ¡tica
        
        ConfigService-->>Gateway: Sucesso + MÃ©tricas qualidade
        Gateway-->>UI: ParÃ¢metro criado (Status: Ativo)
        UI-->>Usuario: âœ… ParÃ¢metro crÃ­tico criado com sucesso
        
    else Falha AutenticaÃ§Ã£o
        AuthService-->>Gateway: Erro 401 - Unauthorized
        Gateway->>AuditService: Log de tentativa nÃ£o autorizada
        Gateway-->>UI: Erro de autenticaÃ§Ã£o
        UI-->>Usuario: âŒ Acesso negado
    end

    Note over Usuario, BCB: PadrÃ£o MVC implementado (Gallotti, 2021)
    Note over Usuario, BCB: Repository Pattern para persistÃªncia
    Note over Usuario, BCB: Pipe-and-Filter para processamento
